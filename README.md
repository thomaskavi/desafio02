# Projeto de Atividades e Participantes

Este projeto é um sistema simples para gerenciar atividades, participantes e suas relações. Abaixo estão os passos para configurar o banco de dados e realizar as consultas.

## Estrutura do Banco de Dados

### Tabelas

- **tb_category**: Contém categorias de atividades.
- **tb_participant**: Contém informações sobre os participantes.
- **tb_activity**: Contém informações sobre as atividades.
- **tb_block**: Contém os blocos de horários das atividades.
- **tb_participant_activity**: Relaciona participantes às atividades.

### Comandos SQL para Criar as Tabelas

```sql
CREATE TABLE tb_category (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    description VARCHAR(255) NOT NULL
);

CREATE TABLE tb_participant (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    email VARCHAR(255) NOT NULL UNIQUE
);

CREATE TABLE tb_activity (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    description VARCHAR(255),
    price FLOAT NOT NULL,
    category_id BIGINT NOT NULL,
    FOREIGN KEY (category_id) REFERENCES tb_category(id)
);

CREATE TABLE tb_block (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    start_time TIMESTAMP NOT NULL,
    end_time TIMESTAMP NOT NULL,
    activity_id BIGINT NOT NULL,
    FOREIGN KEY (activity_id) REFERENCES tb_activity(id)
);

CREATE TABLE tb_participant_activity (
    activity_id BIGINT NOT NULL,
    participant_id BIGINT NOT NULL,
    PRIMARY KEY (activity_id, participant_id),
    FOREIGN KEY (activity_id) REFERENCES tb_activity(id),
    FOREIGN KEY (participant_id) REFERENCES tb_participant(id)
);
```

### Inserir Dados de Teste

#### Categorias
```sql
INSERT INTO tb_category(description) VALUES ('Curso');
INSERT INTO tb_category(description) VALUES ('Oficina');
```
#### Participantes
```sql
INSERT INTO tb_participant(name, email) VALUES ('José Silva', 'jose@gmail.com');
INSERT INTO tb_participant(name, email) VALUES ('Tiago Faria', 'tiago@gmail.com');
INSERT INTO tb_participant(name, email) VALUES ('Maria do Rosário', 'maria@gmail.com');
INSERT INTO tb_participant(name, email) VALUES ('Teresa Silva', 'teresa@gmail.com');
```
#### Atividades e Blocos
```sql
INSERT INTO tb_activity(name, description, price, category_id) 
VALUES ('Curso de HTML', 'Aprenda HTML de forma prática', 100.0, 1);

INSERT INTO tb_block(start_time, end_time, activity_id) 
VALUES ('2017-09-25T08:00:00Z', '2017-09-25T11:00:00Z', 1);

INSERT INTO tb_activity(name, description, price, category_id)
VALUES ('Oficina de Github', 'Controle versões de seus projetos', 50.0, 2);

INSERT INTO tb_block(start_time, end_time, activity_id)
VALUES ('2017-09-25T14:00:00Z', '2017-09-25T18:00:00Z', 2);

INSERT INTO tb_block(start_time, end_time, activity_id)
VALUES ('2017-09-26T08:00:00Z', '2017-09-26T11:00:00Z', 2);
```
#### Relacionar Participantes com Atividades
```sql
INSERT INTO tb_participant_activity (activity_id, participant_id)
VALUES (1, 1);

INSERT INTO tb_participant_activity (activity_id, participant_id)
VALUES (2, 1);

INSERT INTO tb_participant_activity (activity_id, participant_id)
VALUES (1, 2);

INSERT INTO tb_participant_activity (activity_id, participant_id)
VALUES (1, 3);

INSERT INTO tb_participant_activity (activity_id, participant_id)
VALUES (2, 3);

INSERT INTO tb_participant_activity (activity_id, participant_id)
VALUES (2, 4);
```
### Consultas

#### Consultar Atividades com Participantes
```sql
SELECT a.id, a.name, p.id AS participant_id
FROM tb_activity a
JOIN tb_participant_activity pa ON a.id = pa.activity_id
JOIN tb_participant p ON pa.participant_id = p.id;
```
#### Consultar Participantes por Atividade
```sql
SELECT p.name, p.email
FROM tb_participant p
JOIN tb_participant_activity pa ON p.id = pa.participant_id
WHERE pa.activity_id = 1; -- Substitua 1 pelo ID da atividade
```
#### Consultas Blocos de uma Atividade
```sql
SELECT b.start_time, b.end_time
FROM tb_block b
WHERE b.activity_id = 1; -- Substitua 1 pelo ID da atividade
```
